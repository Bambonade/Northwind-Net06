@model CheckoutModel

<div id="User" style="display:none;" data-email="@User.Identity.Name" data-customer="@User.IsInRole("northwind-customer")"></div>
<div id="numProductsInCart" style="display:none;" data-cart-quantity="@Model.Cart.Count()"></div>
<div class="container row">
    <div class="col col-6 border">
        <table class="table table-hover table-striped table-bordered">
            <thead>
                <h4 class="mt-3 ml-2">Order Checkout</h4>
                <hr>
                <div style="display:none;" id="ProductId"></div>
                <div class="row mb-2">
                    <div class="col"><strong>Product</strong></div>
                    <div class="col text-left"><strong>Price</strong></div>
                    <div class="col"><strong>Quantity</strong></div>
                    <div class="col"><strong>Total</strong></div>
                </div>
            </thead>
            <tbody>
                @{
                        var orderTotal = 0.0;
                        var tableRows = 0;
                    }
                    @foreach(CartItem c in Model.Cart){
                        var ProductId = c.ProductId;
                        var UnitPrice = c.Product.UnitPrice;
                        var Quantity = c.Quantity;

                        tableRows++;

                        orderTotal += (double)(c.Product.UnitPrice * c.Quantity) ;
                        <div class="form-row" id="row_@c.CartItemId">
                            <div class="form-group col col-xs-4">@(c.Product.ProductName)</div>
                            <div class="form-group col col-xs-1">
                                $<span id="price_@c.CartItemId">@c.Product.UnitPrice.ToString("F")</span>
                            </div>
                            <div class="form-group col col-xs-4 text-nowrap">
                                <button id="IncreaseCartQuantity" class="btn btn-primary btn-sm" data-id="@c.CartItemId">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                                <button id="DecreaseCartQuantity" class="btn btn-secondary btn-sm" data-id="@c.CartItemId">
                                    <i class="fa-solid fa-minus"></i>
                                </button>
                                <span id="qty_@c.CartItemId">@c.Quantity</span> Unit(s)
                            </div>
                        </div>
                    }
                <hr>
                <div class="text-end">
                    <b>Order Total:</b> $<span id="orderTotal" class="d-inline">@orderTotal.ToString("F")</span>
                </div>
            </tbody>
        </table>
    </div>